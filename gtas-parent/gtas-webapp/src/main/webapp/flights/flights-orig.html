
<div align="center" ng-show="loading" class="jumbotron" style="background-color: #FFFFFF">
	 <img class="full" ng-show="loading" src="resources/img/loading_default_en.gif" />
</div>

													<div class="modal" id="QBModal" tabindex="-1"
																role="dialog" aria-labelledby="myModalLabel"
																aria-hidden="true"
																style="display: none; background: rgba(125, 125, 125, 0.5);">
																<div class="modal-dialog">
																	<div class="modal-content">
																		<div class="modal-header">
																			<button type="button" class="close"
																				data-dismiss="modal" aria-label="Close"
																				ng-click="closeDialog();">
																				<span aria-hidden="true">&times;</span>
																			</button>
																			<h4 class="modal-title">Rule :
																				{{hitDetailDisplay}}</h4>

																		</div>
																		<div class="modal-body">

																			<div class="te">

																				<div id="builder"></div>
																			</div>

																		</div>

																	</div>
																	<!-- /.modal-content -->
																</div>
																<!-- /.modal-dialog -->
															</div>


<div ng-hide="loading">

<h4>
	<span class="glyphicon glyphicon-plane glyphiconFlightPax img-circle"></span> Flights
</h4>

<button ng-click="tableParams.sorting({})"
	class="btn btn-default pull-right">Clear sorting</button>
<button ng-click="tableParams.filter({})"
	class="btn btn-default pull-right">Clear filter</button>
<table id="flightTable" template-pagination="custom/pager"
	ng-table="tableParams" show-filter="true" class="table table-condensed">

	<!-- class="accordion-toggle" -->

	<tbody ng-repeat="flight in $data track by $index"
		style="border-collapse: collapse;" ng-controller="PaxController">

		<tr ng-click="getPaxInfo(flight.flightId, $index);"
			data-toggle="collapse" data-target="#demo{{$index}}"
			style="cursor: pointer;" aria-expanded="false"
			aria-controls="demo{{$index}}">

			<td data-title="'P'" sortable="'totalPax'" filter="{ 'totalPax': 'select' }">{{flight.totalPax}}</td>
			<td data-title="'Hits'" sortable="'ruleHits'" filter="{ 'ruleHits': 'select' }">{{flight.ruleHits}}</td>
			<td data-title="'Carrier'" sortable="'carrier'"
				filter="{ 'carrier': 'select' }"
				filter-data="values($column, 'carrier')">{{flight.carrier}}</td>
			<td data-title="'Flight #'" sortable="'flightNumber'"
				filter="{ 'flightNumber': 'text' }">{{flight.flightNumber}}</td>
			<td data-title="'Origin'" sortable="'origin'"
				filter="{ 'origin': 'select' }"
				filter-data="values($column, 'origin')">{{flight.origin}}</td>
			<td data-title="'Country'" sortable="'originCountry'"
				filter="{ 'originCountry': 'select' }"
				filter-data="values($column, 'originCountry')">{{flight.originCountry}}</td>
			<td data-title="'ETD'" sortable="'etd'" filter="{ 'etd': 'text' }">{{flight.etd}}</td>
			<td data-title="'Destination'" sortable="'destination'"
				filter="{ 'destination': 'select' }"
				filter-data="values($column, 'destination')">{{flight.destination}}</td>
			<td data-title="'Country'" sortable="'destinationCountry'"
				filter="{ 'destinationCountry': 'select' }"
				filter-data="values($column, 'destinationCountry')">{{flight.destinationCountry}}</td>
			<td data-title="'ETA'" sortable="'eta'" filter="{ 'eta': 'text' }">{{flight.eta}}</td>
		</tr>

		<tr>
			<td colspan="12" class="hiddenRow">
				<!--  class="accordian-body collapse"  -->
				<div class="accordian-body collapse" id="demo{{$index}}"
					style="border-collapse: collapse; width: 100%;">
					<h4 style="font-size: 18px;" align="left">
						<span class="glyphicon glyphicon-user glyphiconFlightPax img-circle"></span>
						Passengers on Flight - {{flight.flightNumber}}
					</h4>
					<table id="paxTable" ng-table="tableParams" show-filter="false"
						class="table table-condensed table-hover">
						<thead>
							<tr>
								<th></th>
								<th>R</th>
								<th>L</th>
								<th>Last Name</th>
								<th>First Name</th>
								<th>Middle Name</th>
								<th>Pax Type</th>
								<th>Gender</th>
								<th>DOB</th>
								<th>Citizenship</th>
								<th>Document #</th>
								<th>T</th>
								<th>Issuance Country</th>
								<th>Seat</th>

							</tr>
						</thead> <!-- pax in getPaxSpecificList($index) -->
						<tbody ng-repeat="pax in getPaxSpecificList($index) | orderObjectBy:'ruleHits':true" style="font-size: 14px;">
							<!--  style="border-collapse:collapse;"  data-toggle="collapse" -->
							<tr>
								<td></td>
								<td ng-if="pax.ruleHits > 0" data-toggle="collapse" 
									sortable="'ruleHits'"
									
									data-target="#nestedRule{{pax.lastName+$index}}"
									aria-expanded="false" aria-controls="nestedRule{{$index}}"
									style="cursor: pointer;" ng-click="getRuleHits(pax.paxId);">

									<span class="glyphicon glyphicon-flag glyphiconFlightPax"
									style="padding: 1.5px; color: #d9534f;"></span>

									

								</td>
								<td ng-if="pax.ruleHits === 0"><span
									class="glyphicon glyphicon-flag glyphiconFlightPax" 
									style="padding: 1.5px; color: #007500;"></span></td>
								<td><span class="glyphicon glyphicon-flag glyphiconFlightPax"
									style="padding: 1.5px; color: #007500;"></span></td>
								<td>{{pax.lastName}}</td>
								<td>{{pax.firstName}}</td>
								<td>{{pax.middleName}}</td>
								<td>{{pax.paxType}}</td>
								<td>{{pax.gender}}</td>
								<td>{{pax.dob}}</td>
								<td>{{pax.citizenship}}</td>
								<td>{{pax.documents[0].documentNumber}}</td>
								<td>{{pax.documents[0].documentType}}</td>
								<td>{{pax.documents[0].issuanceCountry}}</td>
								<td>59B</td>
							</tr>
							<!-- Hidden Row -->
						<tr class="accordian-body collapse md-12-col"
										id="nestedRule{{pax.lastName+$index}}">
										<td colspan="16">
										<div class="md-12-col">
								<table id="paxRuleTable" show-filter="false" style="margin-bottom: 0px;"
											class="table table-condensed table-bordered">
											<thead>
												<tr>
													
													<th class="col-sm-1" style=" padding:4px; ">ID</th>
													<th class="col-sm-3" style=" padding:4px; ">Title</th>
													<th class="col-sm-7" style=" padding:4px; ">Description</th>
													<th class="col-sm-1" style=" padding:4px; ">View Criteria</th>
													
												</tr>
											</thead>
											<tbody>
																						
												<tr ng-repeat="hitDetail in paxHitList">
												
												
													<td>
														{{hitDetail.ruleId}}
													</td>	
													<td>
														{{hitDetail.ruleTitle}}
													</td>
													<td>
														{{hitDetail.ruleConditions}}
														</td>
														
														<td ng-show="hitDetail.ruleTitle!==undefined" 
												 ng-if="hitDetail.ruleTitle!==undefined" style="cursor: pointer; font-size: 14px;" ng-click="viewRuleByID(hitDetail.ruleId);" >
													<span class="glyphicon glyphicon-eye-open" style="padding: 1.5px; color: #007500;"></span>
												</td>
												<td  ng-show="hitDetail.ruleTitle!==undefined"
												ng-if="hitDetail.ruleTitle==undefined" font-size: 14px;" >
													<span class="glyphicon glyphicon-eye-close" style="padding: 1.5px; color: #ffffff;"></span>
												</td>
												
												</tr>
											</tbody>
										</table>
						</div>
										</td>
										</tr>
						

						</tbody>

					</table>

				</div> <!-- 		</td> --> <!-- 	</tr> 
            	</table> --> <!-- 	</div> -->

			</td>

		</tr>


	</tbody>
</table>

</div> <!-- outer div -->


<script type="text/ng-template" id="custom/pager">

<ul class="pagination ng-table-pagination" id="flightPaginationList" style="display: inline-block; margin-left: 350px; float: none;">
<li ng-class="{'disabled': !page.active}" ng-repeat="page in pages" ng-switch="page.type" >
    <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a>
    <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a>
    <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a>
    <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a>
    <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a>
    <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a>
</li>
</ul>

</script>

<script type="text/ng-template" id="custom/pager1">
        <ul class="pager ng-cloak">
            <li ng-repeat="page in pages"
                ng-class="{'disabled': !page.active, 'previous': page.type == 'prev', 'next': page.type == 'next'}"
                ng-show="page.type == 'prev' || page.type == 'next'" ng-switch="page.type">
                <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo; Previous</a>
                <a ng-switch-when="next" ng-click="params.page(page.number)" href="">Next &raquo;</a>
            </li>
            <li>
                <div class="btn-group">
                    <button type="button" ng-class="{'active':params.count() == 10}" ng-click="params.count(10)" class="btn btn-default">10</button>
                    <button type="button" ng-class="{'active':params.count() == 25}" ng-click="params.count(25)" class="btn btn-default">25</button>
                    <button type="button" ng-class="{'active':params.count() == 50}" ng-click="params.count(50)" class="btn btn-default">50</button>
                    <button type="button" ng-class="{'active':params.count() == 100}" ng-click="params.count(100)" class="btn btn-default">100</button>
                </div>
            </li>
        </ul>
    </script>

<script  type="text/ng-template" id="QBModal">
<div class="modal fade">
<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <button type="button" class="close" ng-click="close(false)" data-dismiss="modal" aria-hidden="true">&times;</button>
      <h4 class="modal-title">Yes or No?</h4>
    </div>
    <div class="modal-body">
      
      <div id="builder"></div>
    </div>
    <div class="modal-footer">
      <button type="button" ng-click="close(false)" class="btn btn-default" data-dismiss="modal">No</button>
      <button type="button" ng-click="close(true)" class="btn btn-primary" data-dismiss="modal">Yes</button>
    </div>
  </div>
</div>
</div>

</script>
